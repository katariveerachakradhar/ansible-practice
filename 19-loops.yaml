- name: install packages and uninstall packages
  hosts: frontend
  become: yes
  tasks:
    - name: install packages
      ansible.builtin.package:
        name: "{{ item.name }}"
        state: "{{ item.state }}"
      loop:
      - { name: 'mysql', state: 'present' }
      - { name: 'nginx', state: 'present' }
      - { name: 'python3', state: 'absent' }
  when: state=absent
  ansible.builtin.protected_packages:
  loop:
      - { name: 'mysql', state: 'present' }
      - { name: 'nginx', state: 'present' }
      - { name: 'python3', state: 'absent' }


